<head>
</head>
<style>
  .box {
    background-color: transparent;
    width: 68px;
    height: 30px;

    position: absolute;
    left: 200px;
    bottom: -220px;
    z-index: 5;
  }
  .leg1 {
    background-color: transparent;
    width: 1px;
    height: 1px;
    z-index: 3;
    position: absolute;
    left: 230px;
    bottom: -350px;
  }
  .leg2 {
    background-color: transparent;
    width: 1px;
    height: 1px;
    z-index: 6;
    position: absolute;
    left: 230px;
    bottom: -350px;
  }
  .arm1 {
    background-color: transparent;
    width: 1px;
    height: 1px;
    z-index: 2;
    position: absolute;
    left: 236px;
    bottom: -275px;
  }
  .arm2 {
    background-color: transparent;
    width: 1px;
    height: 1px;
    z-index: 7;
    position: absolute;
    left: 236px;
    bottom: -275px;
  }

  .rotate {
    -webkit-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    transform: rotate(90deg);
  }

</style>

<body style="background-color:gray">
    <a style="position: fixed; bottom: 533px">
      <img src="dragonopenwingleft.gif" style="z-index: 0; position: absolute; top: 219px; left: 265px;">
      <img src="dragonopenwingright.gif" style="z-index: 0; position: absolute; top: 219px; left: 103px;">
      <img src="dragonclosewingleft.gif" style="z-index: 0; position: absolute; top: 219px; left: 265px">
      <img src="dragonclosewingright.gif" style="z-index: 0; position: absolute; top: 219px; left: 103px;">
      <img id="wingleft1" src="wingunloadedleft.png" style="z-index: 0; position: absolute; top: 219px; left: 265px;">
      <img id="wingright1" src="wingunloadedright.png" style="z-index: 1; position: absolute; top: 219px; left: 103px;">
      <div id="arm3" class="arm1"><img id="arm1" src="BackArmRight.png" style="z-index: 2; position: absolute; top: -35px; left: -66px;"></div>
      <div id="leg3" class="leg1"><img id="leg1" src="BackLegRight.png" style="z-index: 3; position: absolute; top: -35px; left: -51px;"></div>
      <img id="torso" src="TorsoRight.png" style="z-index: 4; position: absolute; top: 145px; left: 170px;">
      <div id="box" style="z-index: 5;" class="box"><img id="head" src="BustRight.png" class="rotate" style="position: relative; top: -68px; left: -60px;"></div>
      <div id="leg4" class="leg2"><img id="leg2" src="FrontLegRight.png" style="z-index: 6; position: absolute; top: -35px; left: -51px;"></div>
      <div id="arm4" class="arm2"><img id="arm2" src="FrontArmRight.png" style="z-index: 7; position: absolute; top: -35px; left: -66px;"></div>
      <img id="wingleft2" src="wingunloadedleft.png" style="z-index: 0; position: absolute; top: 223px; left: 269px;">
      <img id="wingright2" src="wingunloadedright.png" style="z-index: 8; position: absolute; top: 223px; left: 99px;">
      <div style="z-index: 0; position: absolute; height: 425px; width: 325px; background-color: gray; top: 107px; left: 80px"></div>
    </a></a>
      <input type="button" style= "position: fixed; bottom: 433px; left: 200px" value="(temp) move" onclick="movetemp()">
</body>
<script>
  legs = "position: absolute; top: -35px; left: -51px;"
  keyalreadydown = 0
  dir = 0
  uhoh = 0
  open1 = 0
  move = 0
  turn = 1
  apple = 1
  var angle2 = 0
  var angle3 = 0
  look = 0
  document.getElementById("box").style = "transform: rotate(90deg);"
  box = document.querySelector(".box");
  leg3 = document.getElementById("leg3");
  leg4 = document.getElementById("leg4");
  arm3 = document.getElementById("arm3");
  arm4 = document.getElementById("arm4");
  let boxBoundingRect = box.getBoundingClientRect();
  let boxCenter = {
    x: boxBoundingRect.left + boxBoundingRect.width / 2,
    y: boxBoundingRect.top + boxBoundingRect.height / 2
  };
  window.onkeypress = function(event) {
    if (event.which == 101) {
      if (open1 == 0) {
        open1 = 1
        open()
      } else {
        open1 = 0
        close()
      }
    }

    function open() {
      document.getElementById("wingleft1").src = "dragonopenwingleft.gif"
      document.getElementById("wingleft2").src = "dragonopenwingleft.gif"
      document.getElementById("wingright1").src = "dragonopenwingright.gif"
      document.getElementById("wingright2").src = "dragonopenwingright.gif"
    }

    function close() {
      document.getElementById("wingleft1").src = "dragonclosewingleft.gif"
      document.getElementById("wingleft2").src = "dragonclosewingleft.gif"
      document.getElementById("wingright1").src = "dragonclosewingright.gif"
      document.getElementById("wingright2").src = "dragonclosewingright.gif"
    }
  }
  window.onkeydown = function(event) {
    if (event.which == 17) {
      if (look == 0) {
        look = 1
      } else if (look == 1) {
        look = 0
      }
    }
  }
  document.addEventListener("mousemove", e => {
    angle = Math.atan2(e.pageX - boxCenter.x, -(e.pageY - boxCenter.y)) * (180 / Math.PI);
    if (look == 1) {
      if (angle <= -125) {
        angle = -125
      }
      if (angle >= 125) {
        angle = 125
      }
      if (angle > 0 && turn == 0 && look == 1) {
        box.style.transform = `rotate(${angle}deg)`;
        callright()
      }
      if (angle < 0 && turn == 1 && look == 1) {
        box.style.transform = `rotate(${angle}deg)`;
        callleft()
      }
     box.style.transform = `rotate(${angle}deg)`;
    }
  })
  counter = setInterval(function() {
    if (move == 0 && uhoh == 0) {
      uhoh = 1
    }
    if (move == 1) {
    uhoh=0
    apple=1
    }
    if (dir == 0 && apple == 1 && angle2 == 45 && angle3 == -45) {
      dir = 1
    }
    if (dir == 1 && apple == 1 && angle2 == -45 && angle3 == 45) {
      dir = 0
    }
    if (dir == 1 && move == 0 && angle2 < 0 && angle3 > 0) {
      angle2 = angle2 + 1.25
      angle3 = angle3 - 1.25
      leg3.style.transform = `rotate(${angle2}deg)`;
      leg4.style.transform = `rotate(${angle3}deg)`;
      arm3.style.transform = `rotate(${angle3}deg)`;
      arm4.style.transform = `rotate(${angle2}deg)`;
    } else if (dir == 0 && move == 0 && angle2 > 0 && angle3 < 0) {
      angle2 = angle2 - 1.25
      angle3 = angle3 + 1.25
      leg3.style.transform = `rotate(${angle2}deg)`;
      leg4.style.transform = `rotate(${angle3}deg)`;
      arm3.style.transform = `rotate(${angle3}deg)`;
      arm4.style.transform = `rotate(${angle2}deg)`;
    } else if (move == 0 && angle2 < 0 && angle3 > 0) {
      angle2 = angle2 + 1.25
      angle3 = angle3 - 1.25
      leg3.style.transform = `rotate(${angle2}deg)`;
      leg4.style.transform = `rotate(${angle3}deg)`;
      arm3.style.transform = `rotate(${angle3}deg)`;
      arm4.style.transform = `rotate(${angle2}deg)`;
    } else if (move == 0 && angle2 > 0 && angle3 < 0) {
      angle2 = angle2 - 1.25
      angle3 = angle3 + 1.25
      leg3.style.transform = `rotate(${angle2}deg)`;
      leg4.style.transform = `rotate(${angle3}deg)`;
      arm3.style.transform = `rotate(${angle3}deg)`;
      arm4.style.transform = `rotate(${angle2}deg)`;
    }
    if (dir == 0 && move == 1 && angle2 < 45 && angle3 > -45) {
      angle2 = angle2 + 1.25
      angle3 = angle3 - 1.25
      leg3.style.transform = `rotate(${angle2}deg)`;
      leg4.style.transform = `rotate(${angle3}deg)`;
      arm3.style.transform = `rotate(${angle3}deg)`;
      arm4.style.transform = `rotate(${angle2}deg)`;
    }
    if (dir == 1 && move == 1 && angle2 > -45 && angle3 < 45) {
      angle2 = angle2 - 1.25
      angle3 = angle3 + 1.25
      leg3.style.transform = `rotate(${angle2}deg)`;
      leg4.style.transform = `rotate(${angle3}deg)`;
      arm3.style.transform = `rotate(${angle3}deg)`;
      arm4.style.transform = `rotate(${angle2}deg)`;
    }
  }, 10);


  function callright() {
    legs = "position: absolute; top: -35px; left: -51px;"
    document.getElementById("head").style = "z-index: 5; position: relative; top: -68px; left: -60px;"
    document.getElementById("head").src = "BustRight.png"
    document.getElementById("torso").src = "TorsoRight.png"
    document.getElementById("arm1").src = "BackArmRight.png"
    document.getElementById("arm2").src = "FrontArmRight.png"
    document.getElementById("wingleft1").style = "z-index: 0; position: absolute; top: 219px; left: 265px;"
    document.getElementById("wingleft2").style = "z-index: 0; position: absolute; top: 223px; left: 269px;"
    document.getElementById("wingright1").style = "z-index: 1; position: absolute; top: 219px; left: 103px;"
    document.getElementById("wingright2").style = "z-index: 8; position: absolute; top: 223px; left: 99px;"
    document.getElementById("leg1").style = "z-index: 3; position: absolute; top: -35px; left: -51px;"
    document.getElementById("leg2").style = "z-index: 6; position: absolute; top: -35px; left: -51px;"
    document.getElementById("leg1").src = "BackLegRight.png"
    document.getElementById("leg2").src = "FrontLegRight.png"
    turn = 1
  }
  function callleft() {
    legs = "position: absolute; top: -35px; left: -69px;"
    document.getElementById("head").style = "z-index: 5; position: relative; top: -68px; left: 0px;"
    document.getElementById("head").src = "BustLeft.png"
    document.getElementById("torso").src = "TorsoLeft.png"
    document.getElementById("arm1").src = "BackArmLeft.png"
    document.getElementById("arm2").src = "FrontArmLeft.png"
    document.getElementById("wingleft1").style = "z-index: 1; position: absolute; top: 219px; left: 265px;"
    document.getElementById("wingleft2").style = "z-index: 8; position: absolute; top: 223px; left: 269px;"
    document.getElementById("wingright1").style = "z-index: 0; position: absolute; top: 219px; left: 103px;"
    document.getElementById("wingright2").style = "z-index: 0; position: absolute; top: 223px; left: 99px;"
    document.getElementById("leg1").style = "z-index: 3; position: absolute; top: -35px; left: -69px;"
    document.getElementById("leg2").style = "z-index: 6; position: absolute; top: -35px; left: -69px;"
    document.getElementById("leg1").src = "BackLegLeft.png"
    document.getElementById("leg2").src = "FrontLegLeft.png"
    turn = 0
  }
  function movetemp() {
  if (move == 0) {
  move = 1
  } else {
  move = 0
  }
  }
</script>
